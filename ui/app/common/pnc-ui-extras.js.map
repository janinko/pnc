{"version":3,"sources":["pnc-ui-extras/pnc-ui-extras.module.js","pnc-ui-extras/combobox/combobox.module.js","pnc-ui-extras/combobox/combobox.component.js","pnc-ui-extras/combobox/expressionParser.factory.js","pnc-ui-extras/combobox/px-expression.directive.js","templates.js"],"names":["angular","module","ComboboxController","$log","$scope","$element","$timeout","DEFAULT_OPTION_TEMPLATE_URL","options","showDropDown","modelOptions","optionTemplateUrl","ngModel","editable","$parsers","push","option","getOptionFromViewValue","viewValue","isDefined","getModelValue","$validators","isValidOption","modelValue","getOptionFromModelValue","$render","inputModel","$viewValue","$formatters","transformed","getViewValue","$watch","$setViewValue","loadOptions","debounceMs","debounce","parseInt","find","on","$applyAsync","$setTouched","off","pxExpression","getOptions","then","debug","$id","isArray","value","highlighted","undefined","setShowDropDown","closeDropDown","index","length","isUndefined","setHighlighted","$event","stopPropagation","preventDefault","key","openDropDown","highlightNext","highlightPrevious","select","$inject","pxCombobox","templateUrl","controller","require","bindings","placeholder","component","pxExpressionParser","$parse","TYPEAHEAD_REGEXP","parse","input","match","Error","itemName","source","viewMapper","modelMapper","factory","PxExpressionController","$q","$attrs","parsed","item","locals","when","restrict","scope","directive","run","$templateCache","put"],"mappings":"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","file":"pnc-ui-extras.js","sourcesContent":["angular.module('pnc-ui-extras', [\n  'pnc-ui-extras.templates',\n  'pnc-ui-extras.combobox'\n]);\n\nangular.module('pnc-ui-extras.templates', []);\n","angular.module('pnc-ui-extras.combobox', [\n  'pnc-ui-extras.templates'\n]);\n","class ComboboxController {\n\n  constructor($log, $scope, $element, $timeout) {\n    const DEFAULT_OPTION_TEMPLATE_URL = 'pnc-ui-extras/combobox/combobox-option.template.html';\n\n    this.$log = $log;\n    this.$scope = $scope;\n    this.$element = $element;\n    this.$timeout = $timeout;\n\n    this.options = []; // List of options for the user to select from\n    this.showDropDown = false;\n    this.modelOptions = {}; // Values for ng-model-options directive\n    this.optionTemplateUrl = this.optionTemplateUrl || DEFAULT_OPTION_TEMPLATE_URL;\n  }\n\n  $onInit() {\n    if (this.ngModel) {\n      const editable = this.editable === true || this.editable === 'true';\n\n      this.ngModel.$parsers.push(viewValue => {\n        const option = this.getOptionFromViewValue(viewValue);\n\n        if (angular.isDefined(option)) {\n          return this.getModelValue(option);\n        } else if (editable) {\n          return viewValue;\n        }\n      });\n\n      this.ngModel.$validators.isValidOption = (modelValue, viewValue) => {\n        return angular.isDefined(this.getOptionFromModelValue(modelValue)) || editable;\n      };\n\n      this.ngModel.$render = () => this.inputModel = this.ngModel.$viewValue;\n\n      this.ngModel.$formatters.push(modelValue => {\n        const transformed = this.getViewValue(modelValue);\n\n        if (angular.isDefined(transformed)) {\n          return transformed;\n        }\n\n        const option = this.getOptionFromModelValue(modelValue);\n\n        if (angular.isDefined(option)) {\n          return this.getViewValue(option);\n        } else if (editable) {\n          return modelValue;\n        }\n      });\n\n      this.$scope.$watch(\n        () => this.inputModel,\n        () => {\n          this.ngModel.$setViewValue(this.inputModel);\n          this.loadOptions(this.inputModel);\n        }\n      );\n\n      if (this.debounceMs) {\n        this.modelOptions.debounce = parseInt(this.debounceMs);\n      }\n\n    } else {\n      this.loadOptions();\n    }\n  }\n\n  $postLink() {\n    if (this.ngModel) {\n      this.$timeout(() => {\n        this.$element.find('input').on('blur', () => {\n          this.$scope.$applyAsync(() => this.ngModel.$setTouched());\n        });\n      });\n    }\n  }\n\n  $onDestroy() {\n    if (this.ngModel) {\n      this.$element.find('input').off('blur');\n    }\n  }\n\n  loadOptions(viewValue) {\n    return this.pxExpression.getOptions(viewValue).then(options => {\n      this.$log.debug('ComboboxController::loadOptions() scopeId = %d | options = %O', this.$scope.$id, options);\n      this.$scope.$applyAsync(() => this.options = options);\n      return options;\n    });\n  }\n\n  getViewValue(option) {\n    return this.pxExpression.getViewValue(option);\n  }\n\n  getModelValue(option) {\n    return this.pxExpression.getModelValue(option);\n  }\n\n  getOptionFromViewValue(viewValue) {\n    if (!angular.isArray(this.options)) {\n      return;\n    }\n    return this.options.find(option => this.getViewValue(option) === viewValue);\n  }\n\n  getOptionFromModelValue(modelValue) {\n    if (!angular.isArray(this.options)) {\n      return;\n    }\n    return this.options.find(option => this.getModelValue(option) === modelValue);\n  }\n\n  setShowDropDown(value) {\n    this.$scope.$applyAsync(() => this.showDropDown = value);\n    if (!value) {\n      this.highlighted = undefined;\n    }\n  }\n\n  openDropDown() {\n    this.setShowDropDown(true);\n  }\n\n  closeDropDown() {\n    this.setShowDropDown(false);\n  }\n\n  toggleDropDown() {\n    this.setShowDropDown(!this.showDropDown);\n  }\n\n  select(option) {\n    this.inputModel = this.getViewValue(option);\n    this.closeDropDown();\n  }\n\n  clear() {\n    this.inputModel = undefined;\n    this.closeDropDown();\n  }\n\n  setHighlighted(index) {\n    this.highlighted = index;\n  }\n\n  isHighlighted(index) {\n    return this.highlighted === index;\n  }\n\n  highlightNext() {\n    if (!this.showDropDown || !this.options || this.options.length < 1) {\n      return;\n    }\n\n    if (angular.isUndefined(this.highlighted)) {\n      this.setHighlighted(0);\n    } else if (this.highlighted === this.options.length - 1) {\n      return;\n    } else {\n      this.setHighlighted(this.highlighted + 1);\n    }\n  }\n\n  highlightPrevious() {\n    if (!this.showDropDown || !this.options || this.options.length < 1) {\n      return;\n    }\n\n    if (angular.isUndefined(this.highlighted) || this.highlighted === 0) {\n      return;\n    } else {\n        this.setHighlighted(this.highlighted - 1);\n    }\n  }\n\n  onKey($event) {\n    $event.stopPropagation();\n    $event.preventDefault();\n    switch ($event.key) {\n      case 'ArrowDown':\n        if (!this.showDropDown) {\n          this.openDropDown();\n        } else {\n          this.highlightNext();\n        }\n        break;\n      case 'ArrowUp':\n        this.highlightPrevious();\n        break;\n      case 'Enter':\n        this.select(this.options[this.highlighted]);\n        break;\n      case 'Escape':\n        this.closeDropDown();\n        break;\n    }\n  }\n}\n\nComboboxController.$inject = ['$log', '$scope', '$element', '$timeout'];\n\nconst pxCombobox = {\n  templateUrl: 'pnc-ui-extras/combobox/combobox.template.html',\n  controller: ComboboxController,\n  require: {\n    pxExpression: '?pxExpression',\n    ngModel: '?ngModel'\n  },\n  bindings: {\n    placeholder: '@',\n    editable: '<',\n    debounceMs: '@',\n    optionTemplateUrl: '@'\n  }\n};\n\nangular.module('pnc-ui-extras.combobox')\n       .component('pxCombobox', pxCombobox);\n","/**\n * The work in this file is entirely the work of the AngularUI team, with only\n * extremely minor of modifications. Copyright attribution and license:\n *\n * The MIT License\n *\n * Copyright (c) 2012-2017 the AngularUI Team, https://github.com/organizations/angular-ui/teams/291112\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nconst pxExpressionParser = ($parse) => {\n  const TYPEAHEAD_REGEXP = /^\\s*([\\s\\S]+?)(?:\\s+as\\s+([\\s\\S]+?))?\\s+for\\s+(?:([\\$\\w][\\$\\w\\d]*))\\s+in\\s+([\\s\\S]+?)$/;\n   return {\n     parse: (input) => {\n       let match = input.match(TYPEAHEAD_REGEXP);\n       if (!match) {\n         throw new Error(\n           'Expected typeahead specification in form of \"_modelValue_ (as _label_)? for _item_ in _collection_\"' +\n             ' but got \"' + input + '\".');\n       }\n\n       return {\n         itemName: match[3],\n         source: $parse(match[4]),\n         viewMapper: $parse(match[2] || match[1]),\n         modelMapper: $parse(match[1])\n       };\n     }\n   };\n };\n\npxExpressionParser.$inject = ['$parse'];\n\nangular.module('pnc-ui-extras.combobox')\n       .factory('pxExpressionParser', pxExpressionParser);\n","class PxExpressionController {\n  constructor($log, $q, $scope, $attrs, pxExpressionParser) {\n    this.$log = $log;\n    this.$q = $q;\n    this.$scope = $scope;\n    this.$attrs = $attrs;\n    this.pxExpressionParser = pxExpressionParser;\n\n    this.parsed = pxExpressionParser.parse($attrs.pxExpression);\n\n    this.$log.debug('PxExpressionController::constructor() with scope id = ' + $scope.$id);\n    this.$log.debug('px-expression = ' + $attrs.pxExpression, $scope);\n  }\n\n  getViewValue(item) {\n    let locals = {};\n    locals[this.parsed.itemName] = item;\n    return this.parsed.viewMapper(this.$scope, locals);\n  }\n\n  getModelValue(item) {\n    let locals = {};\n    locals[this.parsed.itemName] = item;\n    return this.parsed.modelMapper(this.$scope, locals);\n  }\n\n  getOptions(viewValue) {\n    return this.$q.when(this.parsed.source(this.$scope, { $viewValue: viewValue }));\n  }\n}\n\nPxExpressionController.$inject = ['$log', '$q', '$scope', '$attrs', 'pxExpressionParser'];\n\n\nconst pxExpression = () => {\n  return {\n    restrict: 'A',\n    scope: false,\n    controller: PxExpressionController,\n  };\n};\n\nangular.module('pnc-ui-extras.combobox')\n       .directive('pxExpression', pxExpression);\n","angular.module('pnc-ui-extras.templates').run(['$templateCache', function($templateCache) {$templateCache.put('pnc-ui-extras/combobox/combobox-option.template.html','<a ng-click=\"$ctrl.select(option)\" href>{{ $ctrl.getViewValue(option) }}</a>\\n');\n$templateCache.put('pnc-ui-extras/combobox/combobox.template.html','<style>\\n.px-search-clear {\\n  position: absolute;\\n  z-index: 100;\\n  right: 18px;\\n  top: 2px;\\n  height: 14px;\\n  margin: auto;\\n  color: inherit;\\n  cursor:  pointer;\\n}\\n\\n.px-search-clear > a:hover {\\n  background-color: inherit;\\n  color: inherit;\\n  cursor:  pointer;\\n}\\n\\n.px-combobox-dropdown {\\n  display: block;\\n}\\n.px-combobox-active a,a:hover {\\n  background-color: #def3ff;\\n}\\n.px-combobox-dropdown > .px-combobox-option a,a:hover {\\n  border-width: 0px;\\n}\\n\\n.px-combobox-dropdown > .px-combobobox-option {\\n  whitespace: normal !important;\\n  overflow-wrap: break-word !important;\\n}\\n\\n</style>\\n<div class=\"combobox-container\" ng-keydown=\"$event.stopPropagation()\">\\n  <div class=\"input-group\">\\n    <input type=\"text\" autocomplete=\"off\" id=\"combobox-{{::$id}}\" ng-keyup=\"$ctrl.onKey($event)\" placeholder=\"{{ ::$ctrl.placeholder }}\" class=\"combobox form-control\" ng-focus=\"$ctrl.openDropDown()\" ng-model=\"$ctrl.inputModel\" ng-model-options=\"$ctrl.modelOptions\" pf-focused=\"$ctrl.showDropDown\">\\n    <div class=\"px-search-clear\"><a class=\"px-search-clear\" ng-show=\"$ctrl.inputModel\" ng-click=\"$ctrl.clear()\"><span class=\"pficon pficon-close\"></span></a></div>\\n    <ul class=\"typeahead typeahead-long dropdown-menu px-combobox-dropdown\" ng-if=\"$ctrl.options.length > 0 && $ctrl.showDropDown\">\\n      <li ng-repeat=\"option in $ctrl.options\" ng-include=\"$ctrl.optionTemplateUrl\" class=\"px-combobox-option\" ng-mouseover=\"$ctrl.setHighlighted($index)\" ng-class=\"{ \\'px-combobox-active\\': $ctrl.isHighlighted($index) }\">\\n      </li>\\n      <li data-value=\"spinner\" class=\"text-center\" ng-show=\"$ctrl.isLoading()\">\\n        <span class=\"spinner spinner-xs spinner-inline\"></span>\\n      </li>\\n    </ul>\\n    <span class=\"input-group-addon dropdown-toggle\" ng-class=\"{ \\'dropup\\': $ctrl.showDropDown }\" data-dropdown=\"dropdown\" role=\"button\" ng-click=\"$ctrl.toggleDropDown()\">\\n      <span class=\"caret\"></span>\\n    </span>\\n  </div>\\n</div>\\n');}]);"]}